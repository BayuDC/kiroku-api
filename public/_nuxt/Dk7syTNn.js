import{N as y,r as l,O as m,L as _}from"./DILZzNnB.js";import{u as p,b as g,a as w}from"./BLw3PmVo.js";const q=y("usage",()=>{const t=l(0),e=l({used_by:"",consumables:[],date:"",staff:""}),s=l({used_by:"",consumables:""});async function v(u){var r,n,o,c;if(u)t.value=u;else if(!t.value)return;const a=await p(`/usages/${t.value}`,{});if(a.data.value){e.value.used_by=(r=a.data.value)==null?void 0:r.used_by,e.value.consumables=((n=a.data.value)==null?void 0:n.consumables)||[],e.value.consumables.forEach(d=>{d.quantity=d.pivot.quantity}),e.value.date=(o=a.data.value)==null?void 0:o.date,e.value.staff=((c=a.data.value)==null?void 0:c.staff.name)||"";return}throw m({statusCode:404,statusMessage:"Not Found"})}async function f(){var a,r;const u=await g("/usages",_(e));return u?(s.value.used_by=((a=u.used_by)==null?void 0:a[0])||"",s.value.consumables=((r=u.consumables)==null?void 0:r[0])||"",!1):(s.value.used_by="",s.value.consumables="",!0)}async function b(){return!await w(`/usages/${t.value}`)}function i(){t.value=0,e.value.used_by="",e.value.consumables=[],s.value.used_by="",s.value.consumables=""}return{id:t,data:e,error:s,load:v,create:f,delete:b,reset:i}});export{q as u};
