import{_ as I}from"./dbQSbgpy.js";import{u as T,_ as M,a as P,b as E,c as G}from"./CDaJBlPb.js";import{s as K}from"./BQUaNR2D.js";import{u as L}from"./BLw3PmVo.js";import{s as C}from"./BQfcDCpi.js";import{e as H,r as h,s as J,c as u,a,b as l,l as $,w as r,k as o,z as b,F as B,x as D,t as s,n as O,q as U,o as n,g as W,d as m}from"./DILZzNnB.js";import{w as q}from"./DKo_HIg7.js";import"./C0ApsXXQ.js";import"./CwxRBsd3.js";import"./CujQqBoZ.js";import"./RxiBsf8a.js";import"./rHo55hVL.js";import"./B4WT0tcV.js";import"./CTxI3r5K.js";import"./Dk7syTNn.js";import"./DWor5bqZ.js";const X={class:"px-4 md:px-10 mx-auto w-full -m-24"},Y={class:"flex flex-wrap px-4"},Z={class:"w-full"},ee={class:"max-w-64 truncate"},te={key:0,class:"mb-6"},ae={class:"block"},oe={class:"flex pl-0 rounded list-none flex-wrap"},se=["disabled"],le=["onClick"],re=["disabled"],ne={class:"text-sm text-gray-600 mt-2"},$e=H({__name:"index",async setup(ie){let p,x;K("Daftar Barang");const v=T("search"),k=T("page"),w=h(""),f=h(1),{data:e,refresh:A}=([p,x]=J(()=>L("/consumables/paginate",{query:{search:w,page:f},default:()=>({current_page:1,data:[],first_page_url:"",from:0,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:15,prev_page_url:null,to:0,total:0})})),p=await p,x(),p),y=h(null);async function N(){C("Barang berhasil dihapus","success"),window.scrollTo({top:0,behavior:"smooth"}),await A()}async function V(){C("Gagal menghapus barang","error"),window.scrollTo({top:0,behavior:"smooth"})}q(v,async()=>{w.value=v.value||"",f.value=1},{throttle:1e3}),q(k,async()=>{f.value=parseInt(k.value||"1")},{throttle:500});function g(d){d>=1&&d<=e.value.last_page&&O({path:"/consumables",query:{...U().query,page:d.toString()}})}function j(){e.value.prev_page_url&&g(e.value.current_page-1)}function F(){e.value.next_page_url&&g(e.value.current_page+1)}return(d,_)=>{const Q=I,c=E,R=P,S=M,z=G;return n(),u("div",X,[a("div",Y,[l(Q),a("div",Z,[l(S,{columns:["Nama","Stok","Deskripsi","Kategori"],path:"/consumables/new"},{default:r(()=>[(n(!0),u(B,null,D(o(e).data,t=>(n(),W(R,{key:t.id,path:`/consumables/${t.id}`,onDelete:i=>o(y).select(t.id,t.name)},{default:r(()=>[l(c,{class:"font-bold"},{default:r(()=>[m(s(t.id),1)]),_:2},1024),l(c,null,{default:r(()=>[m(s(t.name),1)]),_:2},1024),l(c,null,{default:r(()=>[m(s(t.stock),1)]),_:2},1024),l(c,null,{default:r(()=>[a("div",ee,s(t.description),1)]),_:2},1024),l(c,null,{default:r(()=>{var i;return[m(s(((i=t.category)==null?void 0:i.name)||"-"),1)]}),_:2},1024)]),_:2},1032,["path","onDelete"]))),128))]),_:1}),o(e).last_page>1?(n(),u("div",te,[a("nav",ae,[a("ul",oe,[a("li",null,[a("button",{onClick:j,disabled:!o(e).prev_page_url,class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",o(e).prev_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},_[0]||(_[0]=[a("i",{class:"fas fa-chevron-left -ml-px"},null,-1)]),10,se)]),(n(!0),u(B,null,D(o(e).links,(t,i)=>(n(),u("li",{key:t.label},[i>0&&i<o(e).links.length-1?(n(),u("button",{key:0,onClick:ue=>g(parseInt(t.label)),class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",t.active?"text-white bg-pink-500":"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer"])},s(t.label),11,le)):$("",!0)]))),128)),a("li",null,[a("button",{onClick:F,disabled:!o(e).next_page_url,class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",o(e).next_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},_[1]||(_[1]=[a("i",{class:"fas fa-chevron-right -mr-px"},null,-1)]),10,re)])])]),a("div",ne," Menampilkan "+s(o(e).from)+" sampai "+s(o(e).to)+" dari "+s(o(e).total)+" data ",1)])):$("",!0)]),l(z,{store:"consumable",ref_key:"modal",ref:y,onDeleted:N,onFailed:V},null,512)])])}}});export{$e as default};
