import{_ as z}from"./dbQSbgpy.js";import{u as T,_ as L,a as M,b as E,c as G}from"./CDaJBlPb.js";import{s as J}from"./BQUaNR2D.js";import{u as W}from"./BLw3PmVo.js";import{s as C}from"./BQfcDCpi.js";import{e as H,r as h,s as K,c as u,a as o,b as r,l as D,w as l,k as a,z as b,F as P,x as $,t as s,n as O,q as U,o as n,g as X,d as p}from"./DILZzNnB.js";import{w as q}from"./DKo_HIg7.js";import"./C0ApsXXQ.js";import"./CwxRBsd3.js";import"./CujQqBoZ.js";import"./RxiBsf8a.js";import"./rHo55hVL.js";import"./B4WT0tcV.js";import"./CTxI3r5K.js";import"./Dk7syTNn.js";import"./DWor5bqZ.js";const Y={class:"px-4 md:px-10 mx-auto w-full -m-24"},Z={class:"flex flex-wrap px-4"},ee={class:"w-full"},te={key:0,class:"mb-6"},ae={class:"block"},oe={class:"flex pl-0 rounded list-none flex-wrap"},se=["disabled"],re=["onClick"],le=["disabled"],ne={class:"text-sm text-gray-600 mt-2"},De=H({__name:"index",async setup(ie){let _,x;J("Daftar Pemakaian");const v=T("search"),k=T("page"),y=h(""),m=h(1),{data:e,refresh:A}=([_,x]=K(()=>W("/usages",{query:{search:y,page:m},default:()=>({current_page:1,data:[],first_page_url:"",from:0,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:15,prev_page_url:null,to:0,total:0})})),_=await _,x(),_),w=h(null);async function B(){C("Pemakaian berhasil dihapus","success"),window.scrollTo({top:0,behavior:"smooth"}),await A()}async function V(){C("Gagal menghapus pemakaian","error"),window.scrollTo({top:0,behavior:"smooth"})}q(v,async()=>{y.value=v.value||"",m.value=1},{throttle:1e3}),q(k,async()=>{m.value=parseInt(k.value||"1")},{throttle:500});function j(i){return new Date(i).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function f(i){i>=1&&i<=e.value.last_page&&O({path:"/usages",query:{...U().query,page:i.toString()}})}function F(){e.value.prev_page_url&&f(e.value.current_page-1)}function I(){e.value.next_page_url&&f(e.value.current_page+1)}return(i,c)=>{const N=z,d=E,Q=M,R=L,S=G;return n(),u("div",Y,[o("div",Z,[r(N),o("div",ee,[r(R,{columns:["Pemakai","Petugas","Jumlah","Waktu"],path:"/usages/new"},{default:l(()=>[(n(!0),u(P,null,$(a(e).data,t=>(n(),X(Q,{key:t.id,path:`/usages/${t.id}`,btn1:"Detail",onDelete:g=>a(w).select(t.id,"Pemakaian "+t.id+" - "+t.used_by)},{default:l(()=>[r(d,{class:"font-bold"},{default:l(()=>[p(s(t.id),1)]),_:2},1024),r(d,null,{default:l(()=>[p(s(t.used_by),1)]),_:2},1024),r(d,null,{default:l(()=>[p(s(t.staff.name),1)]),_:2},1024),r(d,null,{default:l(()=>[p(s(t.consumables_count)+" barang",1)]),_:2},1024),r(d,null,{default:l(()=>[p(s(j(t.date)),1)]),_:2},1024)]),_:2},1032,["path","onDelete"]))),128))]),_:1}),a(e).last_page>1?(n(),u("div",te,[o("nav",ae,[o("ul",oe,[o("li",null,[o("button",{onClick:F,disabled:!a(e).prev_page_url,class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",a(e).prev_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},c[0]||(c[0]=[o("i",{class:"fas fa-chevron-left -ml-px"},null,-1)]),10,se)]),(n(!0),u(P,null,$(a(e).links,(t,g)=>(n(),u("li",{key:t.label},[g>0&&g<a(e).links.length-1?(n(),u("button",{key:0,onClick:ue=>f(parseInt(t.label)),class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",t.active?"text-white bg-pink-500":"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer"])},s(t.label),11,re)):D("",!0)]))),128)),o("li",null,[o("button",{onClick:I,disabled:!a(e).next_page_url,class:b(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",a(e).next_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},c[1]||(c[1]=[o("i",{class:"fas fa-chevron-right -mr-px"},null,-1)]),10,le)])])]),o("div",ne," Menampilkan "+s(a(e).from)+" sampai "+s(a(e).to)+" dari "+s(a(e).total)+" data ",1)])):D("",!0)]),r(S,{store:"usage",ref_key:"modal",ref:w,onDeleted:B,onFailed:V},null,512)])])}}});export{De as default};
