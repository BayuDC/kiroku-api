import{_ as $}from"./dbQSbgpy.js";import{u as A,_ as C,a as D,b as N,c as B}from"./CDaJBlPb.js";import{s as V}from"./BQUaNR2D.js";import{u as F}from"./BLw3PmVo.js";import{s as d}from"./BQfcDCpi.js";import{e as R,r as u,s as P,c as r,a as f,b as t,w as s,o,F as Q,x as U,k as h,g as q,d as l,t as c,l as E}from"./DILZzNnB.js";import{w as G}from"./DKo_HIg7.js";import"./C0ApsXXQ.js";import"./CwxRBsd3.js";import"./CujQqBoZ.js";import"./RxiBsf8a.js";import"./rHo55hVL.js";import"./B4WT0tcV.js";import"./CTxI3r5K.js";import"./Dk7syTNn.js";import"./DWor5bqZ.js";const L={class:"px-4 md:px-10 mx-auto w-full -m-24"},M={class:"flex flex-wrap px-4"},S={class:"w-full"},j={key:0},z={key:1},_e=R({__name:"index",async setup(H){let a,m;V("Daftar Pengguna");const i=A("search"),_=u(""),{data:w,refresh:x}=([a,m]=P(()=>F("/users",{query:{search:_},default:()=>[]})),a=await a,m(),a),p=u(null);async function y(){d("User berhasil dihapus","success"),window.scrollTo({top:0,behavior:"smooth"}),await x()}async function b(){d("Gagal menghapus user","error"),window.scrollTo({top:0,behavior:"smooth"})}return G(i,async()=>{_.value=i.value||""},{throttle:1e3}),(I,J)=>{const g=$,n=N,k=D,v=C,T=B;return o(),r("div",L,[f("div",M,[t(g),f("div",S,[t(v,{columns:["Nama","Username","Role"],path:"/users/new"},{default:s(()=>[(o(!0),r(Q,null,U(h(w),e=>(o(),q(k,{key:e.id,path:`/users/${e.id}`,onDelete:K=>h(p).select(e.id,e.name)},{default:s(()=>[t(n,{class:"font-bold"},{default:s(()=>[l(c(e.id),1)]),_:2},1024),t(n,null,{default:s(()=>[l(c(e.name),1)]),_:2},1024),t(n,null,{default:s(()=>[l(c(e.username),1)]),_:2},1024),t(n,null,{default:s(()=>[e.role==="admin"?(o(),r("span",j,"Admin")):e.role==="staff"?(o(),r("span",z,"Petugas")):E("",!0)]),_:2},1024)]),_:2},1032,["path","onDelete"]))),128))]),_:1})]),t(T,{store:"user",ref_key:"modal",ref:p,onDeleted:y,onFailed:b},null,512)])])}}});export{_e as default};
