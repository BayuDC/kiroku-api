import{_ as D,a as I}from"./BlcR6lzQ.js";import{_ as $}from"./CwxRBsd3.js";import{e as L,r as z,s as N,g as S,w as T,o as n,a,c as i,l as d,b,k as o,F as f,x as C,i as V,v as F,j as R,t as c,d as U,y as j,z as y}from"./DILZzNnB.js";import{u as A}from"./DWor5bqZ.js";import{u as K}from"./BLw3PmVo.js";import{w as P}from"./DKo_HIg7.js";const M={class:"w-full"},q={class:"w-full"},E={class:"relative w-full mb-3"},H={key:0,class:"mb-2"},J={class:"flex flex-col gap-3 mb-4"},O={class:"border-0 px-2 py-1 placeholder-blueGray-300 text-blueGray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full"},Q=["onClick"],W=["onUpdate:modelValue","disabled"],X={key:0,class:"block text-blueGray-600 text-xs font-medium mb-2 mt-1 text-red-500",htmlfor:"grid-password"},Y={key:1,class:"mt-2"},Z={class:"flex items-center py-1 gap-2"},ee=["onClick","disabled"],te={class:"text-sm font-bold text-gray-500"},ae={key:1},oe={class:"w-full"},se={class:"w-full"},le={class:"w-full"},ne={key:1,class:"mt-4 flex gap-2 w-full"},ie={key:0,class:"ml-auto bg-amber-500 text-white active:bg-amber-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"submit"},fe=L({__name:"FormLoan",props:{freeze:{type:Boolean},freeze2:{type:Boolean}},emits:["save"],async setup(re){let m,h;const s=A(),u=z(""),p=z(""),{data:v}=([m,h]=N(()=>K("/tools",{key:"tools",default:()=>[],query:{search:p,limit:3}})),m=await m,h(),m);P(u,async()=>{if(u.value.length<3){p.value="";return}p.value=u.value},{throttle:1e3});function B(t,l,r){s.data.tools.find(_=>_.id===t)||s.data.tools.push({id:t,name:l,condition_before:r,condition_after:r})}function G(t){s.data.tools.splice(t,1)}function x(t){return new Date(t).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}return(t,l)=>{const r=I,w=$,_=D;return n(),S(_,{path:"/loans",onSave:l[2]||(l[2]=e=>t.$emit("save")),freeze:t.freeze},{default:T(()=>[a("div",M,[b(r,{modelValue:o(s).data.used_by,"onUpdate:modelValue":l[0]||(l[0]=e=>o(s).data.used_by=e),label:"Peminjam",error:o(s).error.used_by,disabled:t.freeze},null,8,["modelValue","error","disabled"])]),a("div",q,[a("div",E,[l[4]||(l[4]=a("label",{class:"block uppercase text-blueGray-600 text-xs font-bold mb-2",htmlfor:"grid-password"},"Alat",-1)),o(s).data.tools.length?(n(),i("div",H,[a("ul",J,[(n(!0),i(f,null,C(o(s).data.tools,(e,g)=>(n(),i("li",{class:"flex gap-1",key:g},[a("div",O,c(e.name)+" (Kondisi: "+c(e.condition_before==="good"?"Baik":"Rusak")+") ",1),t.freeze?V((n(),i("select",{key:1,class:"w-28 border-0 px-2 py-1 placeholder-blueGray-300 text-blueGray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline","onUpdate:modelValue":k=>e.condition_after=k,disabled:!t.freeze2},l[3]||(l[3]=[a("option",{value:"good"},"Baik",-1),a("option",{value:"broken"},"Rusak",-1)]),8,W)),[[j,e.condition_after]]):(n(),i("button",{key:0,class:"bg-red-500 text-white active:bg-red-600 text-xs font-bold uppercase px-2 py-1 rounded outline-none focus:outline-none ease-linear transition-all duration-150",type:"button",onClick:k=>G(g)}," Hapus ",8,Q))]))),128))])])):d("",!0),t.freeze?d("",!0):(n(),i(f,{key:1},[V(a("input",{type:"text",placeholder:"Cari alat...",class:"border-0 px-2 py-1 placeholder-blueGray-300 text-blueGray-600 relative bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full","onUpdate:modelValue":l[1]||(l[1]=e=>R(u)?u.value=e:null)},null,512),[[F,o(u)]]),o(s).error.tools?(n(),i("label",X,c(o(s).error.tools),1)):d("",!0),o(p)?(n(),i("div",Y,[o(v).length?(n(!0),i(f,{key:0},C(o(v),e=>(n(),i("div",Z,[a("button",{type:"button",onClick:g=>B(e.id,e.name,e.condition),disabled:e.status!=="available",class:y([{"bg-indigo-500 text-white active:bg-indigo-600 hover:bg-indigo-600":e.status==="available","bg-gray-400 text-gray-200 cursor-not-allowed":e.status!=="available"},"text-xs font-bold uppercase px-3 py-1 rounded outline-none focus:outline-none ease-linear transition-all duration-150"])}," Tambah ",10,ee),a("span",te,c(e.name),1),a("span",{class:y(["text-sm px-2 py-1 rounded",{"bg-green-100 text-green-600":e.status==="available","bg-red-100 text-red-600":e.status!=="available"}])},c(e.status==="available"?"Tersedia":"Tidak Tersedia"),3),a("span",{class:y(["text-sm px-2 py-1 rounded",{"bg-blue-100 text-blue-600":e.condition==="good","bg-orange-100 text-orange-600":e.condition==="broken"}])},c(e.condition==="good"?"Baik":"Rusak"),3)]))),256)):(n(),i("div",ae,"Tidak ada alat ditemukan"))])):d("",!0)],64))])]),t.freeze?(n(),i(f,{key:0},[a("div",oe,[b(r,{"model-value":x(o(s).data.loan_date),label:"Tanggal Pinjam",disabled:t.freeze},null,8,["model-value","disabled"])]),a("div",se,[b(r,{"model-value":o(s).data.return_date?x(o(s).data.return_date):"-",label:"Tanggal Kembali",disabled:t.freeze},null,8,["model-value","disabled"])]),a("div",le,[b(r,{"model-value":o(s).data.staff,label:"Petugas",disabled:t.freeze},null,8,["model-value","disabled"])])],64)):d("",!0),t.freeze?(n(),i("div",ne,[b(w,{to:"/loans",class:"bg-gray-500 text-white active:bg-blueGray-600 font-bold uppercase text-sm px-6 py-3 rounded shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 ease-linear transition-all duration-150",type:"button"},{default:T(()=>l[5]||(l[5]=[U(" Kembali ",-1)])),_:1,__:[5]}),o(s).data.return_date?d("",!0):(n(),i("button",ie," Dikembalikan "))])):d("",!0)]),_:1},8,["freeze"])}}});export{fe as _};
