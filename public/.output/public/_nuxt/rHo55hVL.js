import{N as f,r as o,O as w,L as m}from"./DILZzNnB.js";import{u as y,b as A,a as $}from"./BLw3PmVo.js";import{u as C}from"./RxiBsf8a.js";const U=f("user",()=>{const n=o(0),r=o({name:"",username:"",password:""}),e=o({name:"",username:"",password:""});async function v(a){var u,t;if(a)n.value=a;else if(!n.value)return;const s=await y(`/users/${n.value}`,{});if(s.data.value){r.value.name=(u=s.data.value)==null?void 0:u.name,r.value.username=(t=s.data.value)==null?void 0:t.username,r.value.password="";return}throw w({statusCode:404,statusMessage:"Not Found"})}async function d(){var s,u,t;const a=await A("/users",m(r));return a?(e.value.name=((s=a.name)==null?void 0:s[0])||"",e.value.username=((u=a.username)==null?void 0:u[0])||"",e.value.password=((t=a.password)==null?void 0:t[0])||"",!1):(e.value.name="",e.value.username="",e.value.password="",!0)}async function i(){var u,t,l;const a={...m(r)};a.password||delete a.password;const s=await C(`/users/${n.value}`,a);return s?(e.value.name=((u=s.name)==null?void 0:u[0])||"",e.value.username=((t=s.username)==null?void 0:t[0])||"",e.value.password=((l=s.password)==null?void 0:l[0])||"",!1):(e.value.name="",e.value.username="",e.value.password="",!0)}async function p(){return!await $(`/users/${n.value}`)}function c(){n.value=0,r.value.name="",r.value.username="",r.value.password="",e.value.name="",e.value.username="",e.value.password=""}return{id:n,data:r,error:e,load:v,create:d,update:i,delete:p,reset:c}});export{U as u};
