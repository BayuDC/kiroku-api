import{_ as I}from"./dbQSbgpy.js";import{u as C,_ as K,a as M,b as P,c as E}from"./CDaJBlPb.js";import{s as G}from"./BQUaNR2D.js";import{u as L}from"./BLw3PmVo.js";import{s as D}from"./BQfcDCpi.js";import{e as H,r as g,s as J,c as l,a as o,b as n,l as h,w as r,k as a,z as x,F as $,x as A,t as i,n as O,q as U,o as s,g as W,d as b}from"./DILZzNnB.js";import{w as B}from"./DKo_HIg7.js";import"./C0ApsXXQ.js";import"./CwxRBsd3.js";import"./CujQqBoZ.js";import"./RxiBsf8a.js";import"./rHo55hVL.js";import"./B4WT0tcV.js";import"./CTxI3r5K.js";import"./Dk7syTNn.js";import"./DWor5bqZ.js";const X={class:"px-4 md:px-10 mx-auto w-full -m-24"},Y={class:"flex flex-wrap px-4"},Z={class:"w-full"},ee={key:0},te={key:1},oe={key:0},ae={key:1},se={class:"max-w-64 truncate"},le={key:0,class:"mb-6"},ne={class:"block"},re={class:"flex pl-0 rounded list-none flex-wrap"},ie=["disabled"],ue=["onClick"],ce=["disabled"],de={class:"text-sm text-gray-600 mt-2"},je=H({__name:"index",async setup(pe){let d,v;G("Daftar Alat");const k=C("search"),y=C("page"),w=g(""),m=g(1),{data:e,refresh:j}=([d,v]=J(()=>L("/tools/paginate",{query:{search:w,page:m},default:()=>({current_page:1,data:[],first_page_url:"",from:0,last_page:1,last_page_url:"",links:[],next_page_url:null,path:"",per_page:15,prev_page_url:null,to:0,total:0})})),d=await d,v(),d),T=g(null);async function q(){D("Alat berhasil dihapus","success"),window.scrollTo({top:0,behavior:"smooth"}),await j()}async function N(){D("Gagal menghapus alat","error"),window.scrollTo({top:0,behavior:"smooth"})}B(k,async()=>{w.value=k.value||"",m.value=1},{throttle:1e3}),B(y,async()=>{m.value=parseInt(y.value||"1")},{throttle:500});function f(p){p>=1&&p<=e.value.last_page&&O({path:"/tools",query:{...U().query,page:p.toString()}})}function R(){e.value.prev_page_url&&f(e.value.current_page-1)}function V(){e.value.next_page_url&&f(e.value.current_page+1)}return(p,_)=>{const F=I,u=P,Q=M,S=K,z=E;return s(),l("div",X,[o("div",Y,[n(F),o("div",Z,[n(S,{columns:["Nama","Status","Kondisi","Deskripsi","Kategori"],path:"/tools/new"},{default:r(()=>[(s(!0),l($,null,A(a(e).data,t=>(s(),W(Q,{key:t.id,path:`/tools/${t.id}`,onDelete:c=>a(T).select(t.id,t.name)},{default:r(()=>[n(u,{class:"font-bold"},{default:r(()=>[b(i(t.id),1)]),_:2},1024),n(u,null,{default:r(()=>[b(i(t.name),1)]),_:2},1024),n(u,null,{default:r(()=>[t.status=="available"?(s(),l("span",ee,"Tersedia")):t.status=="borrowed"?(s(),l("span",te,"Dipinjam")):h("",!0)]),_:2},1024),n(u,null,{default:r(()=>[t.condition=="good"?(s(),l("span",oe,"Baik")):(s(),l("span",ae,"Rusak"))]),_:2},1024),n(u,null,{default:r(()=>[o("div",se,i(t.description),1)]),_:2},1024),n(u,null,{default:r(()=>{var c;return[b(i(((c=t.category)==null?void 0:c.name)||"-"),1)]}),_:2},1024)]),_:2},1032,["path","onDelete"]))),128))]),_:1}),a(e).last_page>1?(s(),l("div",le,[o("nav",ne,[o("ul",re,[o("li",null,[o("button",{onClick:R,disabled:!a(e).prev_page_url,class:x(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",a(e).prev_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},_[0]||(_[0]=[o("i",{class:"fas fa-chevron-left -ml-px"},null,-1)]),10,ie)]),(s(!0),l($,null,A(a(e).links,(t,c)=>(s(),l("li",{key:t.label},[c>0&&c<a(e).links.length-1?(s(),l("button",{key:0,onClick:_e=>f(parseInt(t.label)),class:x(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",t.active?"text-white bg-pink-500":"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer"])},i(t.label),11,ue)):h("",!0)]))),128)),o("li",null,[o("button",{onClick:V,disabled:!a(e).next_page_url,class:x(["first:ml-0 text-xs font-semibold flex w-8 h-8 mx-1 p-0 rounded-full items-center justify-center leading-tight relative border border-solid border-pink-500",a(e).next_page_url?"bg-white text-pink-500 hover:bg-pink-50 cursor-pointer":"bg-gray-100 text-gray-400 cursor-not-allowed"])},_[1]||(_[1]=[o("i",{class:"fas fa-chevron-right -mr-px"},null,-1)]),10,ce)])])]),o("div",de," Menampilkan "+i(a(e).from)+" sampai "+i(a(e).to)+" dari "+i(a(e).total)+" data ",1)])):h("",!0)]),n(z,{store:"tool",ref_key:"modal",ref:T,onDeleted:q,onFailed:N},null,512)])])}}});export{je as default};
